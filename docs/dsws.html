<!DOCTYPE html>
<html>
<head>
    <title>Caltech Library's Digital Library Development Sandbox</title>
    <link href='https://fonts.googleapis.com/css?family=Open+Sans' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" href="/css/site.css">
</head>
<body>
<header>
<a href="http://library.caltech.edu"><img src="/assets/liblogo.gif" alt="Caltech Library logo"></a>
</header>
<nav>
<ul>
<li><a href="/">Home</a></li>
<li><a href="../">Up</a></li>
<li><a href="../">README</a></li>
<li><a href="../license.html">LICENSE</a></li>
<li><a href="../install.html">INSTALL</a></li>
<li><a href="./">Documentation</a></li>
<li><a href="../examples/">Examples</a></li>
<li><a href="../how-to/">How To</a></li>
<li><a href="https://github.com/caltechlibrary/dataset">Github</a></li>
</ul>

</nav>

<section>
<h1>USAGE</h1>

<pre><code>dsws [OPTIONS] [KEY_VALUE_PAIRS] [DOC_ROOT] BLEVE_INDEXES
</code></pre>

<h2>Description</h2>

<p>dsws is a web server and provides a web search service for indexes
built from a dataset collection.</p>

<h3>CONFIGURATION</h3>

<p>dsws can be configurated through environment settings. The following are
supported.</p>

<ul>
<li>DATASET_URL  - (optional) sets the URL to listen on (e.g. <a href="http://localhost:8011">http://localhost:8011</a>)</li>
<li>DATASET_SSL_KEY - (optional) the path to the SSL key if using https</li>
<li>DATASET_SSL_CERT - (optional) the path to the SSL cert if using https</li>
<li>DATASET_TEMPLATE - (optional) path to search results template(s)</li>
</ul>

<h2>OPTIONS</h2>

<pre><code>-acme   Enable Let's Encypt ACME TLS support
-c  Set the path for the SSL Cert
-cert   Set the path for the SSL Cert
-dev-mode   reload templates on each page request
-example    display example(s)
-h  display help
-help   display help
-indexes    comma or colon delimited list of index names
-k  Set the path for the SSL Key
-key    Set the path for the SSL Key
-l  display license
-license    display license
-show-templates display the source code of the template(s)
-t  the path to the search result template(s) (colon delimited)
-template   the path to the search result template(s) (colon delimited)
-u  The protocal and hostname listen for as a URL
-url    The protocal and hostname listen for as a URL
-v  display version
-version    display version
</code></pre>

<h2>EXAMPLES</h2>

<p>Run web server using the content in the current directory
(assumes the environment variables DATASET_DOCROOT are not defined).</p>

<p>dsws</p>

<p>Run web service using &ldquo;index.bleve&rdquo; index, results templates in
&ldquo;templates/search.tmpl&rdquo; and a &ldquo;htdocs&rdquo; directory for static files.</p>

<p>dsws -template=templates/search.tmpl htdocs index.bleve</p>

<p>Run a web service with custom navigation taken from a Markdown file</p>

<p>dsws -template=templates/search.tmpl &ldquo;Nav=nav.md&rdquo; index.bleve</p>

<p>Running above web service using ACME TLS support (i.e. Let&rsquo;s Encrypt).
Note will only include the hostname as the ACME setup is for
listenning on port 443. This may require privilaged account
and will require that the hostname listed matches the public
DNS for the machine (this is need by the ACME protocol to
issue the cert, see <a href="https://letsencrypt.org">https://letsencrypt.org</a> for details)</p>

<p>dsws -acme -template=templates/search.tmpl &ldquo;Nav=nav.md&rdquo; index.bleve</p>

<p>dsws v0.0.3</p>

</section>

<footer>
<span><h1><A href="http://caltech.edu">Caltech</a></h1></span>
<span>&copy; 2017 <a href="https://www.library.caltech.edu/copyright">Caltech library</a></span>
<address>1200 E California Blvd, Mail Code 1-32, Pasadena, CA 91125-3200</address> 
<span>Phone: <a href="tel:+1-626-395-3405">(626)395-3405</a></span>
<span><a href="mailto:library@caltech.edu">Email Us</a></span>
<a class="cl-hide" href="sitemap.xml">Site Map</a>
</footer>
</body>
</html>
