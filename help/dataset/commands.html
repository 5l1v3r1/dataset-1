<!DOCTYPE html>
<html>
<head>
    <title>Caltech Library's Digital Library Development Sandbox</title>
    <link href='https://fonts.googleapis.com/css?family=Open+Sans' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" href="/css/site.css">
</head>
<body>
<header>
<a href="http://library.caltech.edu"><img src="/assets/liblogo.gif" alt="Caltech Library logo"></a>
</header>
<nav>
<ul>
<li><a href="/">Home</a></li>
<li><a href="./">Index</a></li>
<li><a href="../">Up</a></li>
</ul>

</nav>

<section>
<h1>commands</h1>

<p>Documentation on individual commands can be see with <code>dataset -help COMMAND_NAME</code> where
&ldquo;COMMAND_NAME&rdquo; is replaced with one of the commands below &ndash;</p>

<ul>
<li>init - initialize a new collection if none exists, requires a path to collection

<ul>
<li>once collection is created, set the environment variable DATASET
to collection name</li>
<li>if you&rsquo;re using S3 for storing your dataset prefix your path with &lsquo;s3://&rsquo;
&lsquo;dataset init s3://mybucket/mydataset-collections&rsquo;</li>
<li>if you&rsquo;re using GS (Google Cloud Storage) prefix your path with &lsquo;gs://&rsquo;
&lsquo;dataset init gs://mybucket/mydataset-collections&rsquo;</li>
</ul></li>
<li>create - creates a new JSON document or replace an existing one in collection

<ul>
<li>requires JSON document name followed by JSON blob or JSON blob read from stdin</li>
</ul></li>
<li>read - displays a JSON document to stdout

<ul>
<li>requires JSON document name</li>
</ul></li>
<li>update - updates a JSON document in collection

<ul>
<li>requires JSON document name, followed by replacement JSON document name or
JSON document read from stdin</li>
<li>JSON document must already exist</li>
</ul></li>
<li>delete - removes a JSON document from collection

<ul>
<li>requires JSON document name</li>
</ul></li>
<li>join - brings the functionality of jsonjoin to the dataset command.

<ul>
<li>option update will only add unique key/values not in the existing stored document</li>
<li>option overwrite will overwrite all key/values in the existing document</li>
</ul></li>
<li>filter - takes a filter and returns an unordered list of keys that match filter expression

<ul>
<li>if filter expression not provided as a command line parameter then it is read from stdin</li>
</ul></li>
<li>keys - returns the keys to stdout, one key per line</li>
<li>haskey - returns true is key is in collection, false otherwise</li>
<li>path - given a document name return the full path to document</li>
<li>attach - attaches a non-JSON content to a JSON record

<ul>
<li>&ldquo;dataset attach k1 stats.xlsx&rdquo; would attach the stats.xlsx file to JSON document named k1</li>
<li>(stores content in a related tar file)</li>
</ul></li>
<li>attachments - lists any attached content for JSON document

<ul>
<li>&ldquo;dataset attachments k1&rdquo; would list all the attachments for k1</li>
</ul></li>
<li>attached - returns attachments for a JSON document

<ul>
<li>&ldquo;dataset attached k1&rdquo; would write out all the attached files for k1</li>
<li>&ldquo;dataset attached k1 stats.xlsx&rdquo; would write out only the stats.xlsx file attached to k1</li>
</ul></li>
<li>detach - remove attachments to a JSON document

<ul>
<li>&ldquo;dataset detach k1 stats.xlsx&rdquo; would rewrite the attachments tar file without including stats.xlsx</li>
<li>&ldquo;dataset detach k1&rdquo; would remove ALL attachments to k1</li>
</ul></li>
<li>import - import a CSV file&rsquo;s rows as JSON documents

<ul>
<li>&ldquo;dataset import mydata.csv 1&rdquo; would import the CSV file mydata.csv using column one&rsquo;s value as key</li>
</ul></li>
<li>export - export a CSV file based on filtered results of collection records rendering dotpaths associated with column names

<ul>
<li>&ldquo;dataset export titles.csv &lsquo;true&rsquo; &lsquo;._id,.title,.pubDate&rsquo; &lsquo;id,title,publication date&rsquo;&rdquo;
this would export all the ids, titles and publication dates as a CSV fiile named titles.csv</li>
</ul></li>
<li>extract - will return a unique list of unique values based on the associated dot path described in the JSON docs

<ul>
<li>&ldquo;dataset extract true .authors[:].orcid&rdquo; would extract a list of authors&rsquo; orcid ids in collection</li>
</ul></li>
</ul>

</section>

<footer>
<span><h1><A href="http://caltech.edu">Caltech</a></h1></span>
<span>&copy; 2017 <a href="https://www.library.caltech.edu/copyright">Caltech library</a></span>
<address>1200 E California Blvd, Mail Code 1-32, Pasadena, CA 91125-3200</address> 
<span>Phone: <a href="tel:+1-626-395-3405">(626)395-3405</a></span>
<span><a href="mailto:library@caltech.edu">Email Us</a></span>
<a class="cl-hide" href="sitemap.xml">Site Map</a>
</footer>
</body>
</html>
